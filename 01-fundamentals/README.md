# Three.js å…¥é—¨æ•™ç¨‹ - ç¬¬ä¸€éƒ¨åˆ†ï¼šåŸºç¡€æ¦‚å¿µä¸åœºæ™¯æ­å»º

> æœ¬æ•™ç¨‹ä¸“ä¸ºThree.jsåˆå­¦è€…è®¾è®¡ï¼Œä»é›¶å¼€å§‹å­¦ä¹ 3Dç½‘é¡µå¼€å‘ã€‚æˆ‘ä»¬å°†ç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€å’Œä¸°å¯Œçš„å®ä¾‹ï¼Œå¸¦ä½ é€æ­¥æŒæ¡Three.jsçš„æ ¸å¿ƒæ¦‚å¿µå’Œå®è·µæŠ€èƒ½ã€‚

---

## ğŸ“š ç›®å½•

- [å­¦ä¹ ç›®æ ‡](#å­¦ä¹ ç›®æ ‡)
- [å‰ç½®çŸ¥è¯†](#å‰ç½®çŸ¥è¯†)
- [ç¬¬ä¸€ç« ï¼šThree.jsåŸºç¡€æ¦‚å¿µ](#ç¬¬ä¸€ç« threejsåŸºç¡€æ¦‚å¿µ)
- [ç¬¬äºŒç« ï¼šåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨](#ç¬¬äºŒç« åœºæ™¯ç›¸æœºæ¸²æŸ“å™¨)
- [ç¬¬ä¸‰ç« ï¼šåæ ‡ç³»ä¸ç©ºé—´æ¦‚å¿µ](#ç¬¬ä¸‰ç« åæ ‡ç³»ä¸ç©ºé—´æ¦‚å¿µ)
- [ç¬¬å››ç« ï¼šå‡ ä½•ä½“ä¸æè´¨](#ç¬¬å››ç« å‡ ä½•ä½“ä¸æè´¨)
- [ç¬¬äº”ç« ï¼šåŠ¨ç”»åŸºç¡€](#ç¬¬äº”ç« åŠ¨ç”»åŸºç¡€)
- [ç¬¬å…­ç« ï¼šå“åº”å¼è®¾è®¡](#ç¬¬å…­ç« å“åº”å¼è®¾è®¡)
- [ç¬¬ä¸ƒç« ï¼šç»¼åˆå®æˆ˜](#ç¬¬ä¸ƒç« ç»¼åˆå®æˆ˜)
- [å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤](#å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [ä¸‹ä¸€æ­¥å­¦ä¹ ](#ä¸‹ä¸€æ­¥å­¦ä¹ )

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… ç†è§£Three.jsçš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„
- âœ… åˆ›å»ºå¹¶é…ç½®åŸºæœ¬çš„3Dåœºæ™¯
- âœ… ä½¿ç”¨ä¸åŒç±»å‹çš„å‡ ä½•ä½“å’Œæè´¨
- âœ… ç†è§£3Dåæ ‡ç³»å’Œç©ºé—´å˜æ¢
- âœ… å®ç°åŸºæœ¬çš„åŠ¨ç”»æ•ˆæœ
- âœ… åˆ›å»ºå“åº”å¼çš„3Dç½‘é¡µåº”ç”¨
- âœ… æŒæ¡è°ƒè¯•å’Œä¼˜åŒ–æŠ€å·§

---

## ğŸ“‹ å‰ç½®çŸ¥è¯†

åœ¨å¼€å§‹å­¦ä¹ ä¹‹å‰ï¼Œå»ºè®®ä½ å…·å¤‡ä»¥ä¸‹åŸºç¡€çŸ¥è¯†ï¼š

### å¿…å¤‡çŸ¥è¯†
- **HTML5**: ç½‘é¡µçš„åŸºæœ¬ç»“æ„
- **CSS3**: åŸºæœ¬çš„æ ·å¼è®¾ç½®
- **JavaScript (ES6+)**: å˜é‡ã€å‡½æ•°ã€ç®­å¤´å‡½æ•°ã€ç±»ç­‰ç°ä»£è¯­æ³•

### æ¨èçŸ¥è¯†ï¼ˆéå¿…éœ€ï¼‰
- **Canvas API**: äº†è§£åŸºæœ¬çš„2Dç»˜å›¾æ¦‚å¿µ
- **æ•°å­¦åŸºç¡€**: åŸºæœ¬çš„ä¸‰è§’å‡½æ•°ï¼ˆsinã€cosã€tanï¼‰

### å¼€å‘ç¯å¢ƒå‡†å¤‡

#### æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼ˆæ¨èåˆå­¦è€…ï¼‰
- ä»»æ„ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Edgeç­‰ï¼‰
- æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆVS Codeã€Sublime Textç­‰ï¼‰

#### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼ˆæ¨èè¿›é˜¶å­¦ä¹ ï¼‰
```bash
# å®‰è£…Node.jsåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨
npx serve
```

---

## ç¬¬ä¸€ç« ï¼šThree.jsåŸºç¡€æ¦‚å¿µ

### 1.1 ä»€ä¹ˆæ˜¯Three.jsï¼Ÿ

**Three.js** æ˜¯ä¸€ä¸ªåŸºäºWebGLçš„JavaScript 3Då›¾å½¢åº“ï¼Œå®ƒè®©å¼€å‘è€…èƒ½å¤Ÿåœ¨ç½‘é¡µä¸Šè½»æ¾åˆ›å»ºå’Œå±•ç¤º3Då†…å®¹ã€‚

#### ä¸ºä»€ä¹ˆé€‰æ‹©Three.jsï¼Ÿ

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **ç®€å•æ˜“ç”¨** | å°è£…äº†å¤æ‚çš„WebGL APIï¼Œæä¾›ç®€æ´çš„æ¥å£ |
| **åŠŸèƒ½å¼ºå¤§** | æ”¯æŒå‡ ä½•ä½“ã€æè´¨ã€å…‰ç…§ã€åŠ¨ç”»ã€ç‰©ç†ç­‰ |
| **è·¨å¹³å°** | æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼Œæ— éœ€æ’ä»¶ |
| **æ€§èƒ½ä¼˜ç§€** | åˆ©ç”¨GPUåŠ é€Ÿï¼Œæµç•…æ¸²æŸ“å¤æ‚åœºæ™¯ |
| **ç¤¾åŒºæ´»è·ƒ** | ä¸°å¯Œçš„æ–‡æ¡£ã€ç¤ºä¾‹å’Œç¬¬ä¸‰æ–¹åº“ |

#### Three.jsçš„åº”ç”¨åœºæ™¯

- ğŸ® **3Dæ¸¸æˆ**: ç½‘é¡µæ¸¸æˆã€äº’åŠ¨ä½“éªŒ
- ğŸ  **å»ºç­‘å¯è§†åŒ–**: æˆ¿å±‹å±•ç¤ºã€å®¤å†…è®¾è®¡
- ğŸ›ï¸ **ç”µå•†å±•ç¤º**: äº§å“3Då±•ç¤ºã€è™šæ‹Ÿè¯•è¡£
- ğŸ“Š **æ•°æ®å¯è§†åŒ–**: 3Då›¾è¡¨ã€ä¿¡æ¯å±•ç¤º
- ğŸ¨ **åˆ›æ„è‰ºæœ¯**: äº¤äº’è‰ºæœ¯ã€æ•°å­—å±•è§ˆ
- ğŸ¬ **å½±è§†ç‰¹æ•ˆ**: ç½‘é¡µåŠ¨ç”»ã€è§†è§‰ç‰¹æ•ˆ

### 1.2 Three.jsçš„æ ¸å¿ƒæ¶æ„

Three.jsé‡‡ç”¨**åœºæ™¯å›¾ï¼ˆScene Graphï¼‰**æ¶æ„ï¼Œç±»ä¼¼äºç°å®ä¸–ç•Œçš„æ‘„å½±æ£šï¼š

```
ç°å®ä¸–ç•Œæ‘„å½±æ£š          Three.js 3Dåœºæ™¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ‘„å½±æ£š    â”‚    â†’    â”‚   Scene     â”‚  åœºæ™¯ï¼ˆå®¹å™¨ï¼‰
â”‚  (èˆå°)     â”‚         â”‚  (å®¹å™¨)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ‘„åƒæœº    â”‚    â†’    â”‚   Camera    â”‚  ç›¸æœºï¼ˆè§‚å¯Ÿè€…ï¼‰
â”‚  (è§‚å¯Ÿè€…)   â”‚         â”‚  (è§‚å¯Ÿè€…)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ç¯å…‰      â”‚    â†’    â”‚   Light     â”‚  å…‰æºï¼ˆç…§æ˜ï¼‰
â”‚  (ç…§æ˜)     â”‚         â”‚  (ç…§æ˜)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   é“å…·      â”‚    â†’    â”‚   Mesh      â”‚  ç½‘æ ¼ï¼ˆç‰©ä½“ï¼‰
â”‚  (ç‰©ä½“)     â”‚         â”‚  (ç‰©ä½“)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   èƒ¶ç‰‡      â”‚    â†’    â”‚  Renderer   â”‚  æ¸²æŸ“å™¨ï¼ˆç»˜åˆ¶ï¼‰
â”‚  (è®°å½•)     â”‚         â”‚  (ç»˜åˆ¶)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 Three.jsçš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶

#### ç»„ä»¶ä¸€ï¼šåœºæ™¯ï¼ˆSceneï¼‰

**åœºæ™¯**æ˜¯æ‰€æœ‰3Då¯¹è±¡çš„å®¹å™¨ï¼Œç›¸å½“äºä¸€ä¸ªè™šæ‹Ÿçš„èˆå°ã€‚

```javascript
const scene = new THREE.Scene();
```

**åœºæ™¯çš„å¸¸ç”¨å±æ€§ï¼š**
- `background`: èƒŒæ™¯é¢œè‰²æˆ–çº¹ç†
- `fog`: é›¾åŒ–æ•ˆæœ
- `children`: åœºæ™¯ä¸­çš„æ‰€æœ‰å­å¯¹è±¡

**ç±»æ¯”ç†è§£ï¼š**
- åœºæ™¯å°±åƒä¸€ä¸ª**ç©ºæˆ¿é—´**ï¼Œä½ å¯ä»¥åœ¨é‡Œé¢æ”¾ç½®å®¶å…·ã€ç¯å…‰ç­‰
- æ‰€æœ‰è¦æ˜¾ç¤ºçš„3Då¯¹è±¡éƒ½å¿…é¡»æ·»åŠ åˆ°åœºæ™¯ä¸­

#### ç»„ä»¶äºŒï¼šç›¸æœºï¼ˆCameraï¼‰

**ç›¸æœº**å†³å®šäº†æˆ‘ä»¬èƒ½çœ‹åˆ°ä»€ä¹ˆï¼Œç›¸å½“äºæˆ‘ä»¬çš„çœ¼ç›ã€‚

```javascript
const camera = new THREE.PerspectiveCamera(
    75,                                     // è§†é‡è§’åº¦
    window.innerWidth / window.innerHeight, // å®½é«˜æ¯”
    0.1,                                    // è¿‘è£å‰ªé¢
    1000                                    // è¿œè£å‰ªé¢
);
```

**ç›¸æœºçš„ç±»å‹ï¼š**
- `PerspectiveCamera`: é€è§†ç›¸æœºï¼ˆæœ€å¸¸ç”¨ï¼Œæ¨¡æ‹Ÿäººçœ¼ï¼‰
- `OrthographicCamera`: æ­£äº¤ç›¸æœºï¼ˆæ— é€è§†ï¼Œé€‚åˆ2D/ç­‰è½´æµ‹ï¼‰

**ç›¸æœºçš„å…³é”®å±æ€§ï¼š**
- `position`: ç›¸æœºä½ç½®
- `lookAt()`: è§‚å¯Ÿç›®æ ‡
- `fov`: è§†é‡è§’åº¦

**ç±»æ¯”ç†è§£ï¼š**
- ç›¸æœºå°±åƒ**æ‘„åƒæœº**ï¼Œä½ å¯ä»¥ç§»åŠ¨å®ƒã€æ—‹è½¬å®ƒ
- ä¸åŒçš„ç›¸æœºä½ç½®ä¼šçœ‹åˆ°ä¸åŒçš„ç”»é¢

#### ç»„ä»¶ä¸‰ï¼šæ¸²æŸ“å™¨ï¼ˆRendererï¼‰

**æ¸²æŸ“å™¨**è´Ÿè´£å°†3Dåœºæ™¯ç»˜åˆ¶åˆ°2Då±å¹•ä¸Šã€‚

```javascript
const renderer = new THREE.WebGLRenderer({
    antialias: true  // å¼€å¯æŠ—é”¯é½¿
});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);
```

**æ¸²æŸ“å™¨çš„åŠŸèƒ½ï¼š**
- åˆ›å»ºCanvaså…ƒç´ 
- æ¸²æŸ“åœºæ™¯åˆ°Canvas
- å¤„ç†é˜´å½±ã€æŠ—é”¯é½¿ç­‰æ•ˆæœ

**ç±»æ¯”ç†è§£ï¼š**
- æ¸²æŸ“å™¨å°±åƒ**ç”»ç¬”**ï¼Œå°†3Dåœºæ™¯"ç”»"åˆ°å±å¹•ä¸Š
- æ¯æ¬¡è°ƒç”¨`render()`æ–¹æ³•ï¼Œå°±ä¼šç»˜åˆ¶ä¸€å¸§ç”»é¢

### 1.4 Three.jsçš„å·¥ä½œæµç¨‹

```
1. åˆ›å»ºåœºæ™¯ï¼ˆSceneï¼‰
   â†“
2. åˆ›å»ºç›¸æœºï¼ˆCameraï¼‰
   â†“
3. åˆ›å»ºæ¸²æŸ“å™¨ï¼ˆRendererï¼‰
   â†“
4. æ·»åŠ ç‰©ä½“åˆ°åœºæ™¯
   â†“
5. æ·»åŠ å…‰æº
   â†“
6. å¯åŠ¨åŠ¨ç”»å¾ªç¯
   â†“
7. æ¸²æŸ“åœºæ™¯
```

---

## ç¬¬äºŒç« ï¼šåœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨

### 2.1 åˆ›å»ºç¬¬ä¸€ä¸ª3Dåœºæ™¯

è®©æˆ‘ä»¬ä»æœ€ç®€å•çš„ç¤ºä¾‹å¼€å§‹ï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å«æ—‹è½¬ç«‹æ–¹ä½“çš„3Dåœºæ™¯ã€‚

#### å®Œæ•´ä»£ç ç¤ºä¾‹

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ç¬¬ä¸€ä¸ªThree.jsåœºæ™¯</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { overflow: hidden; background-color: #000; }
    </style>
</head>
<body>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
            }
        }
    </script>
    <script type="module">
        import * as THREE from 'three';

        // æ­¥éª¤1ï¼šåˆ›å»ºåœºæ™¯
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0x1a1a2e);

        // æ­¥éª¤2ï¼šåˆ›å»ºç›¸æœº
        const camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
        );
        camera.position.z = 5;

        // æ­¥éª¤3ï¼šåˆ›å»ºæ¸²æŸ“å™¨
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        document.body.appendChild(renderer.domElement);

        // æ­¥éª¤4ï¼šåˆ›å»ºç«‹æ–¹ä½“
        const geometry = new THREE.BoxGeometry(1, 1, 1);
        const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
        const cube = new THREE.Mesh(geometry, material);
        scene.add(cube);

        // æ­¥éª¤5ï¼šåŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate);
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>
```

### 2.2 æ·±å…¥ç†è§£åœºæ™¯ï¼ˆSceneï¼‰

#### åœºæ™¯çš„åˆ›å»ºä¸é…ç½®

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();

// è®¾ç½®èƒŒæ™¯é¢œè‰²
scene.background = new THREE.Color(0x1a1a2e);

// è®¾ç½®èƒŒæ™¯çº¹ç†
const textureLoader = new THREE.TextureLoader();
scene.background = textureLoader.load('skybox.jpg');

// æ·»åŠ é›¾åŒ–æ•ˆæœ
scene.fog = new THREE.Fog(0x1a1a2e, 10, 50);  // é¢œè‰²ã€è¿‘è·ç¦»ã€è¿œè·ç¦»
```

#### é›¾åŒ–æ•ˆæœè¯¦è§£

**é›¾åŒ–æ•ˆæœ**è®©è¿œå¤„çš„ç‰©ä½“é€æ¸æ·¡å‡ºï¼Œå¢åŠ åœºæ™¯çš„æ·±åº¦æ„Ÿã€‚

```javascript
// çº¿æ€§é›¾ï¼ˆLinear Fogï¼‰
scene.fog = new THREE.Fog(0x1a1a2e, 10, 50);
// å‚æ•°è¯´æ˜ï¼š
// - 0x1a1a2e: é›¾çš„é¢œè‰²
// - 10: é›¾å¼€å§‹å‡ºç°çš„è·ç¦»
// - 50: é›¾å®Œå…¨é®æŒ¡çš„è·ç¦»

// æŒ‡æ•°é›¾ï¼ˆExponential Fogï¼‰
scene.fog = new THREE.FogExp2(0x1a1a2e, 0.02);
// å‚æ•°è¯´æ˜ï¼š
// - 0x1a1a2e: é›¾çš„é¢œè‰²
// - 0.02: é›¾çš„å¯†åº¦ï¼ˆå€¼è¶Šå¤§ï¼Œé›¾è¶Šæµ“ï¼‰
```

### 2.3 æ·±å…¥ç†è§£ç›¸æœºï¼ˆCameraï¼‰

#### é€è§†ç›¸æœºï¼ˆPerspectiveCameraï¼‰

é€è§†ç›¸æœºæ¨¡æ‹Ÿäººçœ¼çš„è§†è§‰æ•ˆæœï¼Œè¿‘å¤§è¿œå°ã€‚

```javascript
const camera = new THREE.PerspectiveCamera(
    fov,      // è§†é‡è§’åº¦ï¼ˆField of Viewï¼‰
    aspect,   // å®½é«˜æ¯”ï¼ˆAspect Ratioï¼‰
    near,     // è¿‘è£å‰ªé¢ï¼ˆNear Clipping Planeï¼‰
    far       // è¿œè£å‰ªé¢ï¼ˆFar Clipping Planeï¼‰
);
```

**å‚æ•°è¯¦è§£ï¼š**

| å‚æ•° | è¯´æ˜ | æ¨èå€¼ |
|------|------|--------|
| `fov` | è§†é‡è§’åº¦ï¼ˆåº¦æ•°ï¼‰ | 45-75 |
| `aspect` | å®½é«˜æ¯”ï¼ˆå®½åº¦/é«˜åº¦ï¼‰ | window.innerWidth / window.innerHeight |
| `near` | æœ€è¿‘å¯è§è·ç¦» | 0.1 |
| `far` | æœ€è¿œå¯è§è·ç¦» | 100-1000 |

**è§†é‡è§’åº¦ï¼ˆFOVï¼‰å¯¹æ¯”ï¼š**

```
FOV = 30Â°          FOV = 75Â°          FOV = 120Â°
  â–²                  â–²                   â–²
 / \                / \                 / \
/   \              /   \               /   \
-----            -----               -----
(çª„è§†é‡)         (æ ‡å‡†è§†é‡)           (å®½è§†é‡)
```

#### ç›¸æœºä½ç½®ä¸æœå‘

```javascript
// è®¾ç½®ç›¸æœºä½ç½®
camera.position.set(x, y, z);
camera.position.x = 5;
camera.position.y = 2;
camera.position.z = 10;

// è®©ç›¸æœºçœ‹å‘æŸä¸ªç‚¹
camera.lookAt(0, 0, 0);

// åˆ›å»ºç›®æ ‡å‘é‡
const target = new THREE.Vector3(1, 2, 3);
camera.lookAt(target);
```

**ç›¸æœºç§»åŠ¨ç¤ºä¾‹ï¼š**

```javascript
// å›´ç»•åŸç‚¹æ—‹è½¬
const radius = 10;
const angle = Date.now() * 0.001;
camera.position.x = Math.cos(angle) * radius;
camera.position.z = Math.sin(angle) * radius;
camera.lookAt(0, 0, 0);
```

#### æ­£äº¤ç›¸æœºï¼ˆOrthographicCameraï¼‰

æ­£äº¤ç›¸æœºæ²¡æœ‰é€è§†æ•ˆæœï¼Œé€‚åˆ2Dæ¸¸æˆæˆ–ç­‰è½´æµ‹è§†å›¾ã€‚

```javascript
const aspect = window.innerWidth / window.innerHeight;
const frustumSize = 10;
const camera = new THREE.OrthographicCamera(
    (frustumSize * aspect) / -2,  // å·¦è¾¹ç•Œ
    (frustumSize * aspect) / 2,   // å³è¾¹ç•Œ
    frustumSize / 2,               // ä¸Šè¾¹ç•Œ
    frustumSize / -2,              // ä¸‹è¾¹ç•Œ
    0.1,                           // è¿‘è£å‰ªé¢
    1000                           // è¿œè£å‰ªé¢
);
```

**é€è§†ç›¸æœº vs æ­£äº¤ç›¸æœºï¼š**

```
é€è§†ç›¸æœºï¼ˆè¿‘å¤§è¿œå°ï¼‰        æ­£äº¤ç›¸æœºï¼ˆæ— é€è§†ï¼‰
     â–²                          â–²
    / \                        | |
   /   \                       | |
  /_____\                      | |
  (è¿œå°è¿‘å¤§)                   (å¤§å°ä¸€è‡´)
```

### 2.4 æ·±å…¥ç†è§£æ¸²æŸ“å™¨ï¼ˆRendererï¼‰

#### æ¸²æŸ“å™¨çš„åˆ›å»ºä¸é…ç½®

```javascript
const renderer = new THREE.WebGLRenderer({
    canvas: document.querySelector('#canvas'),  // æŒ‡å®šç°æœ‰canvas
    antialias: true,                             // å¼€å¯æŠ—é”¯é½¿
    alpha: true,                                 // é€æ˜èƒŒæ™¯
    powerPreference: 'high-performance',         // GPUæ€§èƒ½åå¥½
    preserveDrawingBuffer: true,                 // ä¿ç•™ç»˜åˆ¶ç¼“å†²ï¼ˆç”¨äºæˆªå›¾ï¼‰
    stencil: true,                               // å¯ç”¨æ¨¡æ¿ç¼“å†²
    depth: true                                  // å¯ç”¨æ·±åº¦ç¼“å†²
});
```

**å¸¸ç”¨é…ç½®é€‰é¡¹ï¼š**

| é€‰é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `antialias` | æŠ—é”¯é½¿ï¼ˆå¹³æ»‘è¾¹ç¼˜ï¼‰ | false |
| `alpha` | é€æ˜èƒŒæ™¯ | false |
| `powerPreference` | GPUæ€§èƒ½åå¥½ | 'default' |
| `preserveDrawingBuffer` | ä¿ç•™ç¼“å†²ï¼ˆæˆªå›¾ç”¨ï¼‰ | false |

#### æ¸²æŸ“å™¨å°ºå¯¸ä¸åƒç´ æ¯”

```javascript
// è®¾ç½®æ¸²æŸ“å™¨å°ºå¯¸
renderer.setSize(window.innerWidth, window.innerHeight);

// è®¾ç½®åƒç´ æ¯”ï¼ˆä¼˜åŒ–é«˜æ¸…å±ï¼‰
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
```

**åƒç´ æ¯”è¯´æ˜ï¼š**
- `devicePixelRatio`: ç‰©ç†åƒç´ ä¸CSSåƒç´ çš„æ¯”ä¾‹
- é«˜æ¸…å±ï¼ˆRetinaï¼‰çš„åƒç´ æ¯”é€šå¸¸ä¸º2æˆ–3
- é™åˆ¶æœ€å¤§å€¼ä¸º2å¯ä»¥é¿å…æ€§èƒ½é—®é¢˜

#### é˜´å½±é…ç½®

```javascript
// å¼€å¯é˜´å½±
renderer.shadowMap.enabled = true;

// é˜´å½±ç±»å‹
renderer.shadowMap.type = THREE.PCFSoftShadowMap;  // è½¯é˜´å½±
// å¯é€‰å€¼ï¼š
// - THREE.BasicShadowMap: åŸºç¡€é˜´å½±ï¼ˆæ€§èƒ½æœ€å¥½ï¼‰
// - THREE.PCFShadowMap: PCFé˜´å½±
// - THREE.PCFSoftShadowMap: è½¯é˜´å½±ï¼ˆæ•ˆæœæœ€å¥½ï¼‰

// é˜´å½±è´´å›¾åˆ†è¾¨ç‡
renderer.shadowMap.width = 2048;
renderer.shadowMap.height = 2048;
```

#### è‰²è°ƒæ˜ å°„

```javascript
// è‰²è°ƒæ˜ å°„ç±»å‹
renderer.toneMapping = THREE.ACESFilmicToneMapping;
// å¯é€‰å€¼ï¼š
// - THREE.LinearToneMapping: çº¿æ€§
// - THREE.ReinhardToneMapping: Reinhard
// - THREE.CineonToneMapping: Cineon
// - THREE.ACESFilmicToneMapping: ACESç”µå½±çº§ï¼ˆæ¨èï¼‰

// æ›å…‰åº¦
renderer.toneMappingExposure = 1.0;
```

#### è¾“å‡ºè‰²å½©ç©ºé—´

```javascript
// è®¾ç½®è¾“å‡ºè‰²å½©ç©ºé—´ï¼ˆThree.js r152+ï¼‰
renderer.outputColorSpace = THREE.SRGBColorSpace;
// å¯é€‰å€¼ï¼š
// - THREE.SRGBColorSpace: sRGBè‰²å½©ç©ºé—´ï¼ˆæ¨èï¼‰
// - THREE.LinearSRGBColorSpace: çº¿æ€§sRGB
```

### 2.5 å®Œæ•´çš„åœºæ™¯è®¾ç½®ç¤ºä¾‹

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a1a2e);
scene.fog = new THREE.Fog(0x1a1a2e, 10, 50);

// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(0, 5, 10);
camera.lookAt(0, 0, 0);

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({
    antialias: true,
    alpha: true
});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
renderer.shadowMap.enabled = true;
renderer.shadowMap.type = THREE.PCFSoftShadowMap;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.0;
renderer.outputColorSpace = THREE.SRGBColorSpace;
document.body.appendChild(renderer.domElement);
```

---

## ç¬¬ä¸‰ç« ï¼šåæ ‡ç³»ä¸ç©ºé—´æ¦‚å¿µ

### 3.1 Three.jsçš„åæ ‡ç³»

Three.jsä½¿ç”¨**å³æ‰‹åæ ‡ç³»**ï¼Œè¿™æ˜¯3Då›¾å½¢å­¦ä¸­æœ€å¸¸ç”¨çš„åæ ‡ç³»ã€‚

#### åæ ‡è½´æ–¹å‘

```
        Yè½´ï¼ˆç»¿è‰²ï¼‰
         â†‘
         |
         |
         |_______â†’ Xè½´ï¼ˆçº¢è‰²ï¼‰
        /
       /
      /
     â†“
   Zè½´ï¼ˆè“è‰²ï¼ŒæŒ‡å‘å±å¹•å¤–ï¼‰
```

**åæ ‡è½´é¢œè‰²çº¦å®šï¼š**
- **çº¢è‰²ï¼ˆRedï¼‰**: Xè½´ - å‘å³
- **ç»¿è‰²ï¼ˆGreenï¼‰**: Yè½´ - å‘ä¸Š
- **è“è‰²ï¼ˆBlueï¼‰**: Zè½´ - å‘å¤–ï¼ˆæŒ‡å‘è§‚å¯Ÿè€…ï¼‰

#### å³æ‰‹åæ ‡ç³»è§„åˆ™

ä¼¸å‡ºä½ çš„å³æ‰‹ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ–¹å¼ï¼š

```
æ‹‡æŒ‡æŒ‡å‘ = Xè½´æ­£æ–¹å‘ï¼ˆå‘å³ï¼‰
é£ŸæŒ‡æŒ‡å‘ = Yè½´æ­£æ–¹å‘ï¼ˆå‘ä¸Šï¼‰
ä¸­æŒ‡æŒ‡å‘ = Zè½´æ­£æ–¹å‘ï¼ˆå‘å¤–ï¼‰
```

### 3.2 ä½¿ç”¨åæ ‡è½´è¾…åŠ©çº¿

Three.jsæä¾›äº†è¾…åŠ©å·¥å…·æ¥å¯è§†åŒ–åæ ‡ç³»ã€‚

#### AxesHelperï¼ˆåæ ‡è½´è¾…åŠ©çº¿ï¼‰

```javascript
// åˆ›å»ºåæ ‡è½´è¾…åŠ©çº¿
const axesHelper = new THREE.AxesHelper(size);
scene.add(axesHelper);

// ç¤ºä¾‹ï¼šé•¿åº¦ä¸º5çš„åæ ‡è½´
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);
```

**æ•ˆæœè¯´æ˜ï¼š**
- çº¢è‰²çº¿ï¼šXè½´
- ç»¿è‰²çº¿ï¼šYè½´
- è“è‰²çº¿ï¼šZè½´
- çº¿çš„é•¿åº¦ç”±å‚æ•°å†³å®š

#### GridHelperï¼ˆç½‘æ ¼è¾…åŠ©çº¿ï¼‰

```javascript
// åˆ›å»ºç½‘æ ¼è¾…åŠ©çº¿
const gridHelper = new THREE.GridHelper(size, divisions);
scene.add(gridHelper);

// ç¤ºä¾‹ï¼š10x10çš„ç½‘æ ¼ï¼Œåˆ†æˆ10ä»½
const gridHelper = new THREE.GridHelper(10, 10);
scene.add(gridHelper);
```

**å‚æ•°è¯´æ˜ï¼š**
- `size`: ç½‘æ ¼çš„æ€»å¤§å°
- `divisions`: ç½‘æ ¼çš„åˆ†æ®µæ•°

**è‡ªå®šä¹‰ç½‘æ ¼é¢œè‰²ï¼š**

```javascript
// è‡ªå®šä¹‰ä¸­å¿ƒçº¿å’Œç½‘æ ¼çº¿é¢œè‰²
const gridHelper = new THREE.GridHelper(
    10,           // å¤§å°
    10,           // åˆ†æ®µæ•°
    0x444444,     // ä¸­å¿ƒçº¿é¢œè‰²
    0x222222      // ç½‘æ ¼çº¿é¢œè‰²
);
scene.add(gridHelper);
```

### 3.3 ç‰©ä½“çš„ä½ç½®ã€æ—‹è½¬å’Œç¼©æ”¾

#### ä½ç½®ï¼ˆPositionï¼‰

```javascript
// è®¾ç½®ä½ç½®
mesh.position.set(x, y, z);
mesh.position.x = 5;
mesh.position.y = 2;
mesh.position.z = 10;

// è·å–ä½ç½®
const x = mesh.position.x;
const y = mesh.position.y;
const z = mesh.position.z;

// å¤åˆ¶ä½ç½®
mesh.position.copy(otherMesh.position);

// ç§»åŠ¨ç‰©ä½“
mesh.position.x += 1;  // å‘å³ç§»åŠ¨1ä¸ªå•ä½
mesh.position.y -= 1;  // å‘ä¸‹ç§»åŠ¨1ä¸ªå•ä½
```

#### æ—‹è½¬ï¼ˆRotationï¼‰

Three.jsä½¿ç”¨æ¬§æ‹‰è§’ï¼ˆEuler anglesï¼‰è¡¨ç¤ºæ—‹è½¬ã€‚

```javascript
// è®¾ç½®æ—‹è½¬ï¼ˆå¼§åº¦åˆ¶ï¼‰
mesh.rotation.set(x, y, z);
mesh.rotation.x = Math.PI / 2;  // ç»•Xè½´æ—‹è½¬90åº¦
mesh.rotation.y = Math.PI / 4;  // ç»•Yè½´æ—‹è½¬45åº¦
mesh.rotation.z = Math.PI / 6;  // ç»•Zè½´æ—‹è½¬30åº¦

// æ—‹è½¬é¡ºåºï¼ˆé»˜è®¤ï¼šXYZï¼‰
mesh.rotation.order = 'YXZ';  // å…ˆç»•Yè½´ï¼Œå†ç»•Xè½´ï¼Œæœ€åç»•Zè½´

// æŒç»­æ—‹è½¬
mesh.rotation.x += 0.01;  // æ¯å¸§ç»•Xè½´æ—‹è½¬0.01å¼§åº¦
mesh.rotation.y += 0.01;  // æ¯å¸§ç»•Yè½´æ—‹è½¬0.01å¼§åº¦
```

**è§’åº¦ä¸å¼§åº¦è½¬æ¢ï¼š**

```javascript
// è§’åº¦è½¬å¼§åº¦
const radians = THREE.MathUtils.degToRad(90);  // 90åº¦ â†’ 1.5708å¼§åº¦

// å¼§åº¦è½¬è§’åº¦
const degrees = THREE.MathUtils.radToDeg(Math.PI / 2);  // 1.5708å¼§åº¦ â†’ 90åº¦
```

#### ç¼©æ”¾ï¼ˆScaleï¼‰

```javascript
// è®¾ç½®ç¼©æ”¾
mesh.scale.set(x, y, z);
mesh.scale.x = 2;  // Xè½´æ–¹å‘æ”¾å¤§2å€
mesh.scale.y = 0.5;  // Yè½´æ–¹å‘ç¼©å°åˆ°ä¸€åŠ
mesh.scale.z = 1;  // Zè½´æ–¹å‘ä¿æŒåŸæ ·

// å‡åŒ€ç¼©æ”¾
mesh.scale.set(2, 2, 2);  // æ‰€æœ‰æ–¹å‘æ”¾å¤§2å€

// è·å–ç¼©æ”¾
const scaleX = mesh.scale.x;
const scaleY = mesh.scale.y;
const scaleZ = mesh.scale.z;
```

### 3.4 ç©ºé—´å˜æ¢ç¤ºä¾‹

```javascript
// åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“
const geometry = new THREE.BoxGeometry(1, 1, 1);
const material = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
const cube = new THREE.Mesh(geometry, material);

// è®¾ç½®ä½ç½®
cube.position.set(2, 1, 0);

// è®¾ç½®æ—‹è½¬
cube.rotation.set(Math.PI / 4, Math.PI / 4, 0);

// è®¾ç½®ç¼©æ”¾
cube.scale.set(1.5, 1.5, 1.5);

scene.add(cube);
```

### 3.5 åæ ‡ç³»å¯è§†åŒ–ç¤ºä¾‹

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a1a2e);

// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(5, 5, 5);
camera.lookAt(0, 0, 0);

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// æ·»åŠ åæ ‡è½´è¾…åŠ©çº¿
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);

// æ·»åŠ ç½‘æ ¼è¾…åŠ©çº¿
const gridHelper = new THREE.GridHelper(10, 10);
scene.add(gridHelper);

// åœ¨Xè½´ä¸Šæ”¾ç½®çº¢è‰²ç«‹æ–¹ä½“
const boxX = new THREE.Mesh(
    new THREE.BoxGeometry(0.5, 0.5, 0.5),
    new THREE.MeshBasicMaterial({ color: 0xff0000 })
);
boxX.position.set(2, 0, 0);
scene.add(boxX);

// åœ¨Yè½´ä¸Šæ”¾ç½®ç»¿è‰²ç«‹æ–¹ä½“
const boxY = new THREE.Mesh(
    new THREE.BoxGeometry(0.5, 0.5, 0.5),
    new THREE.MeshBasicMaterial({ color: 0x00ff00 })
);
boxY.position.set(0, 2, 0);
scene.add(boxY);

// åœ¨Zè½´ä¸Šæ”¾ç½®è“è‰²ç«‹æ–¹ä½“
const boxZ = new THREE.Mesh(
    new THREE.BoxGeometry(0.5, 0.5, 0.5),
    new THREE.MeshBasicMaterial({ color: 0x0000ff })
);
boxZ.position.set(0, 0, 2);
scene.add(boxZ);

// åœ¨åŸç‚¹æ”¾ç½®ç™½è‰²çƒä½“
const sphere = new THREE.Mesh(
    new THREE.SphereGeometry(0.3, 32, 32),
    new THREE.MeshBasicMaterial({ color: 0xffffff })
);
sphere.position.set(0, 0, 0);
scene.add(sphere);

// åŠ¨ç”»å¾ªç¯
function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}
animate();
```

---

## ç¬¬å››ç« ï¼šå‡ ä½•ä½“ä¸æè´¨

### 4.1 å‡ ä½•ä½“ï¼ˆGeometryï¼‰

å‡ ä½•ä½“å®šä¹‰äº†ç‰©ä½“çš„å½¢çŠ¶ï¼Œç›¸å½“äºç‰©ä½“çš„"éª¨æ¶"ã€‚

#### åŸºç¡€å‡ ä½•ä½“ç±»å‹

| å‡ ä½•ä½“ | è¯´æ˜ | å¸¸ç”¨å‚æ•° |
|--------|------|----------|
| `BoxGeometry` | ç«‹æ–¹ä½“ | å®½ã€é«˜ã€æ·± |
| `SphereGeometry` | çƒä½“ | åŠå¾„ã€æ°´å¹³åˆ†æ®µã€å‚ç›´åˆ†æ®µ |
| `ConeGeometry` | åœ†é”¥ä½“ | åº•é¢åŠå¾„ã€é«˜åº¦ã€åˆ†æ®µæ•° |
| `CylinderGeometry` | åœ†æŸ±ä½“ | é¡¶éƒ¨åŠå¾„ã€åº•éƒ¨åŠå¾„ã€é«˜åº¦ã€åˆ†æ®µæ•° |
| `TorusGeometry` | åœ†ç¯ | ä¸»åŠå¾„ã€ç®¡åŠå¾„ã€å¾„å‘åˆ†æ®µã€ç®¡åˆ†æ®µ |
| `PlaneGeometry` | å¹³é¢ | å®½ã€é«˜ã€å®½åº¦åˆ†æ®µã€é«˜åº¦åˆ†æ®µ |
| `CircleGeometry` | åœ†å½¢ | åŠå¾„ã€åˆ†æ®µæ•° |
| `RingGeometry` | åœ†ç¯ | å†…åŠå¾„ã€å¤–åŠå¾„ã€å¾„å‘åˆ†æ®µã€åˆ†æ®µæ•° |

#### ç«‹æ–¹ä½“ï¼ˆBoxGeometryï¼‰

```javascript
// åˆ›å»ºç«‹æ–¹ä½“
const geometry = new THREE.BoxGeometry(
    width,   // å®½åº¦
    height,  // é«˜åº¦
    depth    // æ·±åº¦
);

// ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª2x3x4çš„ç«‹æ–¹ä½“
const geometry = new THREE.BoxGeometry(2, 3, 4);
```

#### çƒä½“ï¼ˆSphereGeometryï¼‰

```javascript
// åˆ›å»ºçƒä½“
const geometry = new THREE.SphereGeometry(
    radius,        // åŠå¾„
    widthSegments, // æ°´å¹³åˆ†æ®µæ•°ï¼ˆå½±å“å¹³æ»‘åº¦ï¼‰
    heightSegments // å‚ç›´åˆ†æ®µæ•°ï¼ˆå½±å“å¹³æ»‘åº¦ï¼‰
);

// ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåŠå¾„ä¸º1çš„çƒä½“
const geometry = new THREE.SphereGeometry(1, 32, 32);

// ä½åˆ†æ®µæ•°ï¼ˆå¤šè¾¹å½¢æ•ˆæœï¼‰
const lowPolySphere = new THREE.SphereGeometry(1, 8, 8);

// é«˜åˆ†æ®µæ•°ï¼ˆå¹³æ»‘æ•ˆæœï¼‰
const smoothSphere = new THREE.SphereGeometry(1, 64, 64);
```

**åˆ†æ®µæ•°å¯¹æ¯”ï¼š**

```
åˆ†æ®µæ•° = 8          åˆ†æ®µæ•° = 32          åˆ†æ®µæ•° = 64
   â—‹                    â—                    â—
  / \                  / \                  / \
 /   \                /   \                /   \
â—‹-----â—‹              â—-----â—              â—-----â—
(å¤šè¾¹å½¢æ˜æ˜¾)         (è¾ƒå¹³æ»‘)              (éå¸¸å¹³æ»‘)
```

#### åœ†é”¥ä½“ï¼ˆConeGeometryï¼‰

```javascript
// åˆ›å»ºåœ†é”¥ä½“
const geometry = new THREE.ConeGeometry(
    radius,    // åº•é¢åŠå¾„
    height,    // é«˜åº¦
    radialSegments // åˆ†æ®µæ•°
);

// ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåº•é¢åŠå¾„ä¸º0.8ï¼Œé«˜åº¦ä¸º2çš„åœ†é”¥
const geometry = new THREE.ConeGeometry(0.8, 2, 32);
```

#### åœ†ç¯ï¼ˆTorusGeometryï¼‰

```javascript
// åˆ›å»ºåœ†ç¯
const geometry = new THREE.TorusGeometry(
    radius,      // ä¸»åŠå¾„ï¼ˆåœ†ç¯ä¸­å¿ƒåˆ°ç®¡ä¸­å¿ƒçš„è·ç¦»ï¼‰
    tube,        // ç®¡åŠå¾„ï¼ˆåœ†ç¯çš„ç²—ç»†ï¼‰
    radialSegments, // å¾„å‘åˆ†æ®µæ•°
    tubularSegments // ç®¡åˆ†æ®µæ•°
);

// ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªåœ†ç¯
const geometry = new THREE.TorusGeometry(1, 0.3, 16, 100);
```

#### å¹³é¢ï¼ˆPlaneGeometryï¼‰

```javascript
// åˆ›å»ºå¹³é¢
const geometry = new THREE.PlaneGeometry(
    width,   // å®½åº¦
    height,  // é«˜åº¦
    widthSegments,  // å®½åº¦åˆ†æ®µæ•°
    heightSegments  // é«˜åº¦åˆ†æ®µæ•°
);

// ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ª10x10çš„å¹³é¢
const geometry = new THREE.PlaneGeometry(10, 10);

// æ³¨æ„ï¼šå¹³é¢é»˜è®¤é¢å‘Zè½´æ­£æ–¹å‘
// å¦‚æœéœ€è¦å¹³é¢æ°´å¹³æ”¾ç½®ï¼Œéœ€è¦æ—‹è½¬
plane.rotation.x = -Math.PI / 2;
```

### 4.2 æè´¨ï¼ˆMaterialï¼‰

æè´¨å®šä¹‰äº†ç‰©ä½“çš„å¤–è§‚ï¼Œç›¸å½“äºç‰©ä½“çš„"çš®è‚¤"ã€‚

#### æè´¨ç±»å‹å¯¹æ¯”

| æè´¨ç±»å‹ | è¯´æ˜ | æ˜¯å¦éœ€è¦å…‰ç…§ | æ€§èƒ½ |
|----------|------|--------------|------|
| `MeshBasicMaterial` | åŸºç¡€æè´¨ï¼ˆä¸å—å…‰ç…§å½±å“ï¼‰ | å¦ | æœ€é«˜ |
| `MeshStandardMaterial` | æ ‡å‡†æè´¨ï¼ˆPBRï¼‰ | æ˜¯ | ä¸­ç­‰ |
| `MeshPhongMaterial` | Phongæè´¨ï¼ˆé«˜å…‰ï¼‰ | æ˜¯ | ä¸­ç­‰ |
| `MeshLambertMaterial` | Lambertæè´¨ï¼ˆæ¼«åå°„ï¼‰ | æ˜¯ | è¾ƒé«˜ |
| `MeshToonMaterial` | å¡é€šæè´¨ | æ˜¯ | ä¸­ç­‰ |
| `MeshNormalMaterial` | æ³•çº¿æè´¨ï¼ˆæ˜¾ç¤ºæ³•çº¿æ–¹å‘ï¼‰ | å¦ | æœ€é«˜ |

#### MeshBasicMaterialï¼ˆåŸºç¡€æè´¨ï¼‰

```javascript
const material = new THREE.MeshBasicMaterial({
    color: 0xff0000,        // é¢œè‰²
    wireframe: false,       // æ˜¯å¦æ˜¾ç¤ºçº¿æ¡†
    transparent: false,     // æ˜¯å¦é€æ˜
    opacity: 1.0,           // é€æ˜åº¦ï¼ˆ0-1ï¼‰
    side: THREE.FrontSide   // æ¸²æŸ“é¢ï¼ˆå‰/å/åŒé¢ï¼‰
});

// ç¤ºä¾‹ï¼šçº¢è‰²çº¿æ¡†ç«‹æ–¹ä½“
const material = new THREE.MeshBasicMaterial({
    color: 0xff0000,
    wireframe: true
});
```

**sideå±æ€§è¯´æ˜ï¼š**
- `THREE.FrontSide`: åªæ¸²æŸ“æ­£é¢ï¼ˆæ€§èƒ½æœ€å¥½ï¼‰
- `THREE.BackSide`: åªæ¸²æŸ“èƒŒé¢
- `THREE.DoubleSide`: æ¸²æŸ“åŒé¢ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰

#### MeshStandardMaterialï¼ˆæ ‡å‡†æè´¨ï¼‰

```javascript
const material = new THREE.MeshStandardMaterial({
    color: 0x00ff00,        // åŸºç¡€é¢œè‰²
    roughness: 0.5,         // ç²—ç³™åº¦ï¼ˆ0-1ï¼Œè¶Šå°è¶Šå…‰æ»‘ï¼‰
    metalness: 0.5,         // é‡‘å±åº¦ï¼ˆ0-1ï¼Œè¶Šå¤§è¶Šåƒé‡‘å±ï¼‰
    emissive: 0x000000,     // è‡ªå‘å…‰é¢œè‰²
    emissiveIntensity: 1.0, // è‡ªå‘å…‰å¼ºåº¦
    transparent: false,     // æ˜¯å¦é€æ˜
    opacity: 1.0,           // é€æ˜åº¦
    side: THREE.FrontSide   // æ¸²æŸ“é¢
});
```

**ç²—ç³™åº¦ï¼ˆRoughnessï¼‰å¯¹æ¯”ï¼š**

```
roughness = 0.1    roughness = 0.5    roughness = 0.9
     â—                  â—                  â—
   (éå¸¸å…‰æ»‘)         (ä¸­ç­‰ç²—ç³™)         (éå¸¸ç²—ç³™)
   (å¼ºåå°„)           (å¼±åå°„)           (æ— åå°„)
```

**é‡‘å±åº¦ï¼ˆMetalnessï¼‰å¯¹æ¯”ï¼š**

```
metalness = 0.0     metalness = 0.5     metalness = 1.0
     â—                  â—                  â—
   (éé‡‘å±)           (åŠé‡‘å±)           (å…¨é‡‘å±)
   (å¡‘æ–™æ„Ÿ)           (æ··åˆæ„Ÿ)           (é‡‘å±æ„Ÿ)
```

#### MeshPhongMaterialï¼ˆPhongæè´¨ï¼‰

```javascript
const material = new THREE.MeshPhongMaterial({
    color: 0x0000ff,        // åŸºç¡€é¢œè‰²
    specular: 0xffffff,     // é«˜å…‰é¢œè‰²
    shininess: 30,          // é«˜å…‰äº®åº¦ï¼ˆ0-100ï¼‰
    flatShading: false,     // æ˜¯å¦ä½¿ç”¨å¹³é¢ç€è‰²
    transparent: false,     // æ˜¯å¦é€æ˜
    opacity: 1.0,           // é€æ˜åº¦
    side: THREE.FrontSide   // æ¸²æŸ“é¢
});
```

#### MeshNormalMaterialï¼ˆæ³•çº¿æè´¨ï¼‰

```javascript
// æ³•çº¿æè´¨æ ¹æ®é¢çš„æ³•çº¿æ–¹å‘æ˜¾ç¤ºé¢œè‰²
const material = new THREE.MeshNormalMaterial();

// å¸¸ç”¨äºè°ƒè¯•ï¼Œå¯è§†åŒ–ç‰©ä½“çš„æ³•çº¿æ–¹å‘
```

### 4.3 åˆ›å»ºç½‘æ ¼ï¼ˆMeshï¼‰

ç½‘æ ¼æ˜¯å‡ ä½•ä½“å’Œæè´¨çš„ç»„åˆï¼Œæ˜¯æœ€ç»ˆæ˜¾ç¤ºçš„3Då¯¹è±¡ã€‚

```javascript
// åˆ›å»ºç½‘æ ¼
const mesh = new THREE.Mesh(geometry, material);

// å°†ç½‘æ ¼æ·»åŠ åˆ°åœºæ™¯
scene.add(mesh);

// ä»åœºæ™¯ä¸­ç§»é™¤
scene.remove(mesh);

// é”€æ¯ç½‘æ ¼ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰
mesh.geometry.dispose();
mesh.material.dispose();
```

### 4.4 å‡ ä½•ä½“ä¸æè´¨ç¤ºä¾‹

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a1a2e);

// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.set(0, 2, 8);
camera.lookAt(0, 0, 0);

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// æ·»åŠ å…‰æº
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 5, 5);
scene.add(directionalLight);

// åˆ›å»ºç«‹æ–¹ä½“
const boxGeometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
const boxMaterial = new THREE.MeshStandardMaterial({
    color: 0xff6b6b,
    roughness: 0.5,
    metalness: 0.1
});
const box = new THREE.Mesh(boxGeometry, boxMaterial);
box.position.set(-2.5, 0, 0);
scene.add(box);

// åˆ›å»ºçƒä½“
const sphereGeometry = new THREE.SphereGeometry(1, 32, 32);
const sphereMaterial = new THREE.MeshStandardMaterial({
    color: 0x4ecdc4,
    roughness: 0.3,
    metalness: 0.2
});
const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
sphere.position.set(0, 0, 0);
scene.add(sphere);

// åˆ›å»ºåœ†é”¥ä½“
const coneGeometry = new THREE.ConeGeometry(0.8, 2, 32);
const coneMaterial = new THREE.MeshStandardMaterial({
    color: 0xffe66d,
    roughness: 0.4,
    metalness: 0.3
});
const cone = new THREE.Mesh(coneGeometry, coneMaterial);
cone.position.set(2.5, 0, 0);
scene.add(cone);

// åŠ¨ç”»å¾ªç¯
function animate() {
    requestAnimationFrame(animate);
    box.rotation.x += 0.01;
    box.rotation.y += 0.01;
    sphere.rotation.x += 0.015;
    sphere.rotation.z += 0.01;
    cone.rotation.y += 0.02;
    renderer.render(scene, camera);
}
animate();
```

---

## ç¬¬äº”ç« ï¼šåŠ¨ç”»åŸºç¡€

### 5.1 åŠ¨ç”»å¾ªç¯ï¼ˆAnimation Loopï¼‰

åŠ¨ç”»å¾ªç¯æ˜¯Three.jsåŠ¨ç”»çš„æ ¸å¿ƒï¼Œå®ƒè®©åœºæ™¯æŒç»­æ›´æ–°å’Œæ¸²æŸ“ã€‚

#### requestAnimationFrame

`requestAnimationFrame`æ˜¯æµè§ˆå™¨æä¾›çš„APIï¼Œç”¨äºåˆ›å»ºå¹³æ»‘çš„åŠ¨ç”»ã€‚

```javascript
function animate() {
    // è¯·æ±‚ä¸‹ä¸€å¸§åŠ¨ç”»
    requestAnimationFrame(animate);

    // æ›´æ–°ç‰©ä½“çŠ¶æ€
    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.01;

    // æ¸²æŸ“åœºæ™¯
    renderer.render(scene, camera);
}

// å¯åŠ¨åŠ¨ç”»å¾ªç¯
animate();
```

**ä¸ºä»€ä¹ˆä½¿ç”¨requestAnimationFrameï¼Ÿ**

| ç‰¹æ€§ | requestAnimationFrame | setInterval |
|------|----------------------|-------------|
| æ€§èƒ½ | è‡ªåŠ¨ä¼˜åŒ–ï¼Œåœ¨åå°æš‚åœ | æŒç»­è¿è¡Œï¼Œæµªè´¹èµ„æº |
| å¹³æ»‘åº¦ | ä¸å±å¹•åˆ·æ–°ç‡åŒæ­¥ï¼ˆé€šå¸¸60fpsï¼‰ | å¯èƒ½ä¸æµç•… |
| èŠ‚èƒ½ | åœ¨ä¸å¯è§æ—¶åœæ­¢ | æŒç»­æ¶ˆè€—èµ„æº |

### 5.2 æ—¶é’Ÿï¼ˆClockï¼‰

Three.jsæä¾›äº†`Clock`ç±»æ¥ç²¾ç¡®è®¡ç®—æ—¶é—´ã€‚

```javascript
// åˆ›å»ºæ—¶é’Ÿ
const clock = new THREE.Clock();

function animate() {
    requestAnimationFrame(animate);

    // è·å–ä¸¤å¸§ä¹‹é—´çš„æ—¶é—´å·®ï¼ˆç§’ï¼‰
    const delta = clock.getDelta();

    // è·å–æ€»è¿è¡Œæ—¶é—´ï¼ˆç§’ï¼‰
    const elapsed = clock.getElapsedTime();

    // ä½¿ç”¨deltaå®ç°å¹³æ»‘åŠ¨ç”»
    mesh.rotation.y += delta * 0.5;

    // ä½¿ç”¨elapsedå®ç°å‘¨æœŸåŠ¨ç”»
    mesh.position.y = Math.sin(elapsed) * 0.5;

    renderer.render(scene, camera);
}

animate();
```

**delta vs elapsedï¼š**

```javascript
// delta: ä¸¤å¸§ä¹‹é—´çš„æ—¶é—´å·®
// ä¼˜ç‚¹ï¼šåŠ¨ç”»é€Ÿåº¦ä¸å¸§ç‡æ— å…³ï¼Œå§‹ç»ˆå¹³æ»‘
mesh.rotation.y += delta * 2;  // æ¯ç§’æ—‹è½¬2å¼§åº¦

// elapsed: æ€»è¿è¡Œæ—¶é—´
// ä¼˜ç‚¹ï¼šé€‚åˆå‘¨æœŸæ€§åŠ¨ç”»
mesh.position.y = Math.sin(elapsed * 2) * 0.5;  // å‘¨æœŸä¸ºÏ€ç§’
```

### 5.3 å¸¸è§åŠ¨ç”»ç±»å‹

#### æ—‹è½¬åŠ¨ç”»

```javascript
// æŒç»­æ—‹è½¬
mesh.rotation.x += 0.01;
mesh.rotation.y += 0.01;

// ä½¿ç”¨deltaå®ç°å¹³æ»‘æ—‹è½¬
mesh.rotation.y += delta * 0.5;

// ä½¿ç”¨elapsedå®ç°å‘¨æœŸæ€§æ—‹è½¬
mesh.rotation.y = elapsed * 0.5;
```

#### ä½ç§»åŠ¨ç”»

```javascript
// ç®€å•ä½ç§»
mesh.position.x += 0.01;

// å¾€å¤è¿åŠ¨ï¼ˆä½¿ç”¨sinå‡½æ•°ï¼‰
mesh.position.x = Math.sin(elapsed) * 2;

// åœ†å‘¨è¿åŠ¨
mesh.position.x = Math.cos(elapsed) * 3;
mesh.position.z = Math.sin(elapsed) * 3;

// èºæ—‹è¿åŠ¨
mesh.position.x = Math.cos(elapsed) * elapsed * 0.1;
mesh.position.z = Math.sin(elapsed) * elapsed * 0.1;
mesh.position.y = elapsed * 0.05;
```

#### ç¼©æ”¾åŠ¨ç”»

```javascript
// å‘¼å¸æ•ˆæœï¼ˆå‘¨æœŸæ€§ç¼©æ”¾ï¼‰
const scale = 1 + Math.sin(elapsed * 3) * 0.2;
mesh.scale.set(scale, scale, scale);

// å•è½´ç¼©æ”¾
mesh.scale.y = 1 + Math.sin(elapsed * 2) * 0.3;
```

#### å¤åˆåŠ¨ç”»

```javascript
// ç»„åˆæ—‹è½¬ã€ä½ç§»å’Œç¼©æ”¾
mesh.rotation.y += delta * 0.5;
mesh.position.y = Math.sin(elapsed * 2) * 0.5;
const scale = 1 + Math.sin(elapsed * 3) * 0.1;
mesh.scale.set(scale, scale, scale);
```

### 5.4 åŠ¨ç”»æ§åˆ¶

#### æš‚åœ/ç»§ç»­åŠ¨ç”»

```javascript
let isAnimating = true;

function animate() {
    if (isAnimating) {
        requestAnimationFrame(animate);
        mesh.rotation.y += 0.01;
        renderer.render(scene, camera);
    }
}

// æš‚åœåŠ¨ç”»
isAnimating = false;

// ç»§ç»­åŠ¨ç”»
isAnimating = true;
animate();
```

#### é€Ÿåº¦æ§åˆ¶

```javascript
let animationSpeed = 1.0;

function animate() {
    requestAnimationFrame(animate);
    mesh.rotation.y += 0.01 * animationSpeed;
    renderer.render(scene, camera);
}

// åŠ é€Ÿ
animationSpeed = 2.0;

// å‡é€Ÿ
animationSpeed = 0.5;

// åœæ­¢
animationSpeed = 0.0;
```

### 5.5 åŠ¨ç”»ç¤ºä¾‹

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a1a2e);

// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.z = 5;

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// åˆ›å»ºæ—¶é’Ÿ
const clock = new THREE.Clock();

// åˆ›å»ºå¤šä¸ªç‰©ä½“
const geometries = [
    new THREE.BoxGeometry(1, 1, 1),
    new THREE.SphereGeometry(0.5, 32, 32),
    new THREE.ConeGeometry(0.5, 1, 32)
];

const colors = [0xff6b6b, 0x4ecdc4, 0xffe66d];
const meshes = [];

for (let i = 0; i < 3; i++) {
    const material = new THREE.MeshStandardMaterial({
        color: colors[i],
        roughness: 0.5,
        metalness: 0.2
    });
    const mesh = new THREE.Mesh(geometries[i], material);
    mesh.position.x = (i - 1) * 2;
    scene.add(mesh);
    meshes.push(mesh);
}

// æ·»åŠ å…‰æº
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 5, 5);
scene.add(directionalLight);

// åŠ¨ç”»å¾ªç¯
function animate() {
    requestAnimationFrame(animate);

    const delta = clock.getDelta();
    const elapsed = clock.getElapsedTime();

    // ä¸åŒçš„åŠ¨ç”»æ•ˆæœ
    meshes[0].rotation.x += delta * 0.5;  // æŒç»­æ—‹è½¬
    meshes[0].rotation.y += delta * 0.5;

    meshes[1].position.y = Math.sin(elapsed * 2) * 0.5;  // ä¸Šä¸‹æµ®åŠ¨
    meshes[1].rotation.z += delta * 0.3;

    const scale = 1 + Math.sin(elapsed * 3) * 0.2;  // å‘¼å¸æ•ˆæœ
    meshes[2].scale.set(scale, scale, scale);
    meshes[2].rotation.y += delta * 0.7;

    renderer.render(scene, camera);
}

animate();
```

---

## ç¬¬å…­ç« ï¼šå“åº”å¼è®¾è®¡

### 6.1 ä¸ºä»€ä¹ˆéœ€è¦å“åº”å¼è®¾è®¡ï¼Ÿ

åœ¨Webå¼€å‘ä¸­ï¼Œç”¨æˆ·çš„å±å¹•å°ºå¯¸åƒå·®ä¸‡åˆ«ï¼š
- æ¡Œé¢æ˜¾ç¤ºå™¨ï¼š1920x1080ã€2560x1440ç­‰
- ç¬”è®°æœ¬ï¼š1366x768ã€1920x1080ç­‰
- å¹³æ¿ï¼š768x1024ã€1024x1366ç­‰
- æ‰‹æœºï¼š375x667ã€414x896ç­‰

å¦‚æœä¸åšå“åº”å¼å¤„ç†ï¼Œ3Dåœºæ™¯å¯èƒ½ä¼šï¼š
- ç‰©ä½“å˜å½¢ï¼ˆå®½é«˜æ¯”ä¸æ­£ç¡®ï¼‰
- ç”»é¢æ¨¡ç³Šï¼ˆåƒç´ æ¯”ä¸æ­£ç¡®ï¼‰
- æ€§èƒ½ä¸‹é™ï¼ˆæ¸²æŸ“ä¸å¿…è¦çš„åƒç´ ï¼‰

### 6.2 å“åº”å¼çª—å£è°ƒæ•´

#### ç›‘å¬çª—å£å¤§å°å˜åŒ–

```javascript
// ç›‘å¬resizeäº‹ä»¶
window.addEventListener('resize', onWindowResize);

function onWindowResize() {
    // è·å–æ–°çš„çª—å£å°ºå¯¸
    const width = window.innerWidth;
    const height = window.innerHeight;

    // æ›´æ–°ç›¸æœºçš„å®½é«˜æ¯”
    camera.aspect = width / height;

    // æ›´æ–°ç›¸æœºçš„æŠ•å½±çŸ©é˜µ
    camera.updateProjectionMatrix();

    // æ›´æ–°æ¸²æŸ“å™¨å°ºå¯¸
    renderer.setSize(width, height);

    // æ›´æ–°åƒç´ æ¯”
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
}
```

#### å®Œæ•´çš„å“åº”å¼è®¾ç½®

```javascript
// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
document.body.appendChild(renderer.domElement);

// å“åº”å¼å¤„ç†
function onWindowResize() {
    const width = window.innerWidth;
    const height = window.innerHeight;

    // æ›´æ–°ç›¸æœº
    camera.aspect = width / height;
    camera.updateProjectionMatrix();

    // æ›´æ–°æ¸²æŸ“å™¨
    renderer.setSize(width, height);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
}

window.addEventListener('resize', onWindowResize);
```

### 6.3 åƒç´ æ¯”ï¼ˆPixel Ratioï¼‰

#### ä»€ä¹ˆæ˜¯åƒç´ æ¯”ï¼Ÿ

åƒç´ æ¯” = ç‰©ç†åƒç´  / CSSåƒç´ 

| è®¾å¤‡ç±»å‹ | åƒç´ æ¯” | ç¤ºä¾‹ |
|----------|--------|------|
| æ™®é€šæ˜¾ç¤ºå™¨ | 1 | 1920x1080 CSSåƒç´  = 1920x1080 ç‰©ç†åƒç´  |
| Retinaæ˜¾ç¤ºå™¨ | 2 | 1920x1080 CSSåƒç´  = 3840x2160 ç‰©ç†åƒç´  |
| é«˜ç«¯æ‰‹æœº | 3 | 375x667 CSSåƒç´  = 1125x2001 ç‰©ç†åƒç´  |

#### ä¸ºä»€ä¹ˆé™åˆ¶åƒç´ æ¯”ï¼Ÿ

```javascript
// ä¸é™åˆ¶åƒç´ æ¯”ï¼ˆå¯èƒ½æ€§èƒ½é—®é¢˜ï¼‰
renderer.setPixelRatio(window.devicePixelRatio);

// é™åˆ¶æœ€å¤§åƒç´ æ¯”ä¸º2ï¼ˆæ¨èï¼‰
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
```

**é™åˆ¶åƒç´ æ¯”çš„å¥½å¤„ï¼š**
- é¿å…åœ¨é«˜DPIè®¾å¤‡ä¸Šæ¸²æŸ“è¿‡å¤šåƒç´ 
- æé«˜æ€§èƒ½ï¼Œé™ä½GPUè´Ÿè½½
- è§†è§‰è´¨é‡ä»ç„¶è¶³å¤Ÿå¥½

### 6.4 å“åº”å¼è®¾è®¡ç¤ºä¾‹

```javascript
// åˆ›å»ºåœºæ™¯
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x1a1a2e);

// åˆ›å»ºç›¸æœº
const camera = new THREE.PerspectiveCamera(
    75,
    window.innerWidth / window.innerHeight,
    0.1,
    1000
);
camera.position.z = 5;

// åˆ›å»ºæ¸²æŸ“å™¨
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
document.body.appendChild(renderer.domElement);

// åˆ›å»ºå¤šä¸ªç‰©ä½“
const geometries = [
    new THREE.BoxGeometry(1, 1, 1),
    new THREE.SphereGeometry(0.5, 32, 32),
    new THREE.ConeGeometry(0.5, 1, 32),
    new THREE.TorusGeometry(0.5, 0.2, 16, 100),
    new THREE.OctahedronGeometry(0.6)
];

const colors = [0xff6b6b, 0x4ecdc4, 0xffe66d, 0x95e1d3, 0xf38181];
const meshes = [];

for (let i = 0; i < 5; i++) {
    const material = new THREE.MeshStandardMaterial({
        color: colors[i],
        roughness: 0.5,
        metalness: 0.2
    });
    const mesh = new THREE.Mesh(geometries[i], material);
    mesh.position.x = (i - 2) * 1.5;
    mesh.position.y = Math.sin(i) * 0.5;
    scene.add(mesh);
    meshes.push(mesh);
}

// æ·»åŠ å…‰æº
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 5, 5);
scene.add(directionalLight);

// æ·»åŠ åæ ‡è½´è¾…åŠ©çº¿
const axesHelper = new THREE.AxesHelper(3);
scene.add(axesHelper);

// æ·»åŠ ç½‘æ ¼è¾…åŠ©çº¿
const gridHelper = new THREE.GridHelper(10, 10);
scene.add(gridHelper);

// å“åº”å¼å¤„ç†
function onWindowResize() {
    const width = window.innerWidth;
    const height = window.innerHeight;

    camera.aspect = width / height;
    camera.updateProjectionMatrix();

    renderer.setSize(width, height);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
}

window.addEventListener('resize', onWindowResize);

// åŠ¨ç”»å¾ªç¯
function animate() {
    requestAnimationFrame(animate);

    meshes.forEach((mesh, index) => {
        mesh.rotation.x += 0.01 * (index + 1);
        mesh.rotation.y += 0.015 * (index + 1);
    });

    renderer.render(scene, camera);
}

animate();
```

### 6.5 ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–

#### è§¦æ‘¸äº‹ä»¶å¤„ç†

```javascript
// ç®€å•çš„è§¦æ‘¸æ—‹è½¬
let touchStartX = 0;
let touchStartY = 0;

document.addEventListener('touchstart', (event) => {
    touchStartX = event.touches[0].clientX;
    touchStartY = event.touches[0].clientY;
});

document.addEventListener('touchmove', (event) => {
    const touchX = event.touches[0].clientX;
    const touchY = event.touches[0].clientY;

    const deltaX = touchX - touchStartX;
    const deltaY = touchY - touchStartY;

    mesh.rotation.y += deltaX * 0.01;
    mesh.rotation.x += deltaY * 0.01;

    touchStartX = touchX;
    touchStartY = touchY;
});
```

#### è®¾å¤‡æ–¹å‘æ£€æµ‹

```javascript
// æ£€æµ‹ç§»åŠ¨è®¾å¤‡
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

if (isMobile) {
    // ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–
    renderer.setPixelRatio(1);  // é™ä½åƒç´ æ¯”ä»¥æé«˜æ€§èƒ½
    camera.fov = 90;  // å¢å¤§è§†é‡è§’åº¦
    camera.updateProjectionMatrix();
}
```

---

## ç¬¬ä¸ƒç« ï¼šç»¼åˆå®æˆ˜

### 7.1 ç»¼åˆç¤ºä¾‹æ¦‚è¿°

æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç»¼åˆæ€§çš„3Dåœºæ™¯ï¼ŒåŒ…å«ï¼š
- å¤šç§å‡ ä½•ä½“
- å¤šç§æè´¨
- å¤šç§å…‰æº
- å¤æ‚çš„åŠ¨ç”»æ•ˆæœ
- äº¤äº’æ§åˆ¶
- å“åº”å¼è®¾è®¡

### 7.2 å®Œæ•´ä»£ç 

å®Œæ•´çš„ç»¼åˆç¤ºä¾‹ä»£ç è¯·å‚è€ƒè¯¥é¡¹ç›®ä»“åº“çš„`05-comprehensive.html`æ–‡ä»¶ã€‚

### 7.3 ä»£ç è§£æ

#### åœºæ™¯è®¾ç½®
- åˆ›å»ºæ·±è‰²èƒŒæ™¯
- æ·»åŠ é›¾åŒ–æ•ˆæœï¼Œå¢åŠ æ·±åº¦æ„Ÿ

#### ç›¸æœºè®¾ç½®
- ä½¿ç”¨60åº¦è§†é‡è§’åº¦
- ç›¸æœºä½ç½®è®¾ç½®åœ¨ä¸Šæ–¹ï¼Œä¿¯è§†åœºæ™¯

#### æ¸²æŸ“å™¨è®¾ç½®
- å¼€å¯æŠ—é”¯é½¿
- å¯ç”¨é˜´å½±
- ä¼˜åŒ–åƒç´ æ¯”

#### å…‰æºç³»ç»Ÿ
- ç¯å¢ƒå…‰ï¼šæä¾›åŸºç¡€ç…§æ˜
- å¹³è¡Œå…‰ï¼šä¸»å…‰æºï¼Œäº§ç”Ÿé˜´å½±
- ç‚¹å…‰æºï¼šè¡¥å…‰å’Œè½®å»“å…‰

#### ç‰©ä½“åˆ›å»º
- åœ°é¢ï¼šæ¥æ”¶é˜´å½±
- ä¸­å¿ƒç«‹æ–¹ä½“ï¼šæ—‹è½¬åŠ¨ç”»
- ç¯ç»•çƒä½“ï¼šè½¨é“è¿åŠ¨
- ç¯ç»•åœ†é”¥ï¼šå¤–åœˆè½¨é“
- ç¯ç»•åœ†ç¯ï¼šæœ€å¤–åœˆè½¨é“

#### åŠ¨ç”»æ•ˆæœ
- æ—‹è½¬åŠ¨ç”»
- è½¨é“è¿åŠ¨
- ä¸Šä¸‹æµ®åŠ¨
- ç›¸æœºæ‘†åŠ¨

#### äº¤äº’æ§åˆ¶
- ç©ºæ ¼é”®ï¼šæš‚åœ/ç»§ç»­
- Ré”®ï¼šé‡ç½®ç›¸æœº

#### å“åº”å¼è®¾è®¡
- çª—å£å¤§å°å˜åŒ–å¤„ç†
- åƒç´ æ¯”ä¼˜åŒ–

---

## å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šå±å¹•å…¨é»‘ï¼Œä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°

**å¯èƒ½åŸå› ï¼š**
1. ç›¸æœºä½ç½®ä¸æ­£ç¡®
2. ç‰©ä½“åœ¨ç›¸æœºè§†é‡å¤–
3. æ¸²æŸ“å™¨æ²¡æœ‰æ­£ç¡®æ·»åŠ åˆ°é¡µé¢

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// æ£€æŸ¥ç›¸æœºä½ç½®
console.log('Camera position:', camera.position);

// æ£€æŸ¥ç‰©ä½“ä½ç½®
console.log('Mesh position:', mesh.position);

// ç¡®ä¿æ¸²æŸ“å™¨å·²æ·»åŠ åˆ°é¡µé¢
document.body.appendChild(renderer.domElement);

// ä½¿ç”¨åæ ‡è½´è¾…åŠ©çº¿è°ƒè¯•
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);
```

### é—®é¢˜2ï¼šç‰©ä½“å˜å½¢æˆ–æ‹‰ä¼¸

**å¯èƒ½åŸå› ï¼š**
- ç›¸æœºå®½é«˜æ¯”ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// ç¡®ä¿åœ¨çª—å£å¤§å°å˜åŒ–æ—¶æ›´æ–°å®½é«˜æ¯”
function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
}
window.addEventListener('resize', onWindowResize);
```

### é—®é¢˜3ï¼šåŠ¨ç”»å¡é¡¿æˆ–ä¸æµç•…

**å¯èƒ½åŸå› ï¼š**
1. å‡ ä½•ä½“åˆ†æ®µæ•°è¿‡é«˜
2. åƒç´ æ¯”è®¾ç½®è¿‡é«˜
3. æ¸²æŸ“äº†å¤ªå¤šç‰©ä½“

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// é™ä½å‡ ä½•ä½“åˆ†æ®µæ•°
const geometry = new THREE.SphereGeometry(1, 16, 16);  // è€Œä¸æ˜¯32, 32

// é™åˆ¶åƒç´ æ¯”
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

// ä½¿ç”¨LODï¼ˆLevel of Detailï¼‰
const lod = new THREE.LOD();
lod.addLevel(highDetailMesh, 0);
lod.addLevel(lowDetailMesh, 50);
scene.add(lod);
```

### é—®é¢˜4ï¼šæè´¨çœ‹èµ·æ¥å¾ˆæš—æˆ–æ²¡æœ‰å…‰æ³½

**å¯èƒ½åŸå› ï¼š**
- æ²¡æœ‰æ·»åŠ å…‰æº
- ä½¿ç”¨äº†ä¸å—å…‰ç…§å½±å“çš„æè´¨

**è§£å†³æ–¹æ¡ˆï¼š**
```javascript
// æ·»åŠ å…‰æº
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
directionalLight.position.set(5, 5, 5);
scene.add(directionalLight);

// ä½¿ç”¨å—å…‰ç…§å½±å“çš„æè´¨
const material = new THREE.MeshStandardMaterial({
    color: 0xff0000,
    roughness: 0.5,
    metalness: 0.5
});
```

### é—®é¢˜5ï¼šæ§åˆ¶å°æŠ¥é”™

**å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š**

```javascript
// é”™è¯¯ï¼šTHREE is not defined
// è§£å†³ï¼šæ­£ç¡®å¯¼å…¥Three.js
import * as THREE from 'three';

// é”™è¯¯ï¼šCannot read property 'x' of undefined
// è§£å†³ï¼šç¡®ä¿å¯¹è±¡å·²åˆ›å»º
if (mesh) {
    mesh.position.x = 5;
}

// é”™è¯¯ï¼šWebGL not supported
// è§£å†³ï¼šæ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒWebGL
if (!window.WebGLRenderingContext) {
    alert('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒWebGL');
}
```

---

## æœ€ä½³å®è·µ

### 1. æ€§èƒ½ä¼˜åŒ–

#### å‡å°‘Draw Calls
```javascript
// åˆå¹¶é™æ€å‡ ä½•ä½“
import { mergeGeometries } from 'three/examples/jsm/utils/BufferGeometryUtils.js';
const mergedGeometry = mergeGeometries([geo1, geo2, geo3]);
```

#### ä½¿ç”¨å®ä¾‹åŒ–æ¸²æŸ“
```javascript
// æ¸²æŸ“å¤§é‡ç›¸åŒç‰©ä½“
const instancedMesh = new THREE.InstancedMesh(
    geometry,
    material,
    count  // å®ä¾‹æ•°é‡
);
```

#### é™åˆ¶åƒç´ æ¯”
```javascript
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
```

### 2. ä»£ç ç»„ç»‡

#### ä½¿ç”¨æ¨¡å—åŒ–
```javascript
// scene.js
export function createScene() {
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x1a1a2e);
    return scene;
}

// camera.js
export function createCamera() {
    const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
    );
    camera.position.z = 5;
    return camera;
}

// main.js
import { createScene } from './scene.js';
import { createCamera } from './camera.js';

const scene = createScene();
const camera = createCamera();
```

### 3. å†…å­˜ç®¡ç†

#### æ­£ç¡®é”€æ¯å¯¹è±¡
```javascript
function disposeMesh(mesh) {
    // é”€æ¯å‡ ä½•ä½“
    mesh.geometry.dispose();

    // é”€æ¯æè´¨
    if (Array.isArray(mesh.material)) {
        mesh.material.forEach(m => m.dispose());
    } else {
        mesh.material.dispose();
    }

    // ä»åœºæ™¯ä¸­ç§»é™¤
    scene.remove(mesh);
}

// ä½¿ç”¨
disposeMesh(mesh);
```

### 4. è°ƒè¯•æŠ€å·§

#### ä½¿ç”¨è¾…åŠ©å·¥å…·
```javascript
// åæ ‡è½´è¾…åŠ©çº¿
const axesHelper = new THREE.AxesHelper(5);
scene.add(axesHelper);

// ç½‘æ ¼è¾…åŠ©çº¿
const gridHelper = new THREE.GridHelper(10, 10);
scene.add(gridHelper);

// åŒ…å›´ç›’è¾…åŠ©çº¿
const boxHelper = new THREE.BoxHelper(mesh);
scene.add(boxHelper);
```

#### ä½¿ç”¨æ§åˆ¶å°æ—¥å¿—
```javascript
// è¾“å‡ºåœºæ™¯ä¿¡æ¯
console.log('Scene:', scene);
console.log('Camera:', camera);
console.log('Renderer:', renderer);

// è¾“å‡ºç‰©ä½“ä¿¡æ¯
console.log('Mesh position:', mesh.position);
console.log('Mesh rotation:', mesh.rotation);
console.log('Mesh scale:', mesh.scale);
```

### 5. å“åº”å¼è®¾è®¡

#### å§‹ç»ˆå¤„ç†çª—å£å¤§å°å˜åŒ–
```javascript
function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
}

window.addEventListener('resize', onWindowResize);
```

---

## ä¸‹ä¸€æ­¥å­¦ä¹ 

æ­å–œä½ å®Œæˆäº†Three.jså…¥é—¨æ•™ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ï¼æ¥ä¸‹æ¥ä½ å¯ä»¥å­¦ä¹ ï¼š

### æ¨èå­¦ä¹ è·¯å¾„

1. **ç¬¬äºŒéƒ¨åˆ†ï¼šæè´¨ä¸çº¹ç†**
   - æ·±å…¥å­¦ä¹ å„ç§æè´¨ç±»å‹
   - ä½¿ç”¨çº¹ç†è´´å›¾
   - ç¯å¢ƒè´´å›¾å’Œåå°„

2. **ç¬¬ä¸‰éƒ¨åˆ†ï¼šå…‰ç…§ç³»ç»Ÿ**
   - å„ç§å…‰æºç±»å‹è¯¦è§£
   - é˜´å½±é…ç½®
   - å…¨å±€å…‰ç…§æŠ€æœ¯

3. **ç¬¬å››éƒ¨åˆ†ï¼šåŠ¨ç”»ä¸äº¤äº’**
   - ä½¿ç”¨Tween.js
   - é¼ æ ‡äº¤äº’
   - é”®ç›˜æ§åˆ¶
   - è§¦æ‘¸äº‹ä»¶

4. **ç¬¬äº”éƒ¨åˆ†ï¼šåŠ è½½å¤–éƒ¨æ¨¡å‹**
   - GLTF/GLBæ ¼å¼
   - OBJæ ¼å¼
   - FBXæ ¼å¼

5. **ç¬¬å…­éƒ¨åˆ†ï¼šé«˜çº§ç‰¹æ€§**
   - åå¤„ç†æ•ˆæœ
   - ç²’å­ç³»ç»Ÿ
   - ç‰©ç†å¼•æ“
   - ç€è‰²å™¨ç¼–ç¨‹

### æ¨èèµ„æº

#### å®˜æ–¹èµ„æº
- [Three.jså®˜æ–¹ç½‘ç«™](https://threejs.org/)
- [Three.jså®˜æ–¹æ–‡æ¡£](https://threejs.org/docs/)
- [Three.jså®˜æ–¹ç¤ºä¾‹](https://threejs.org/examples/)

#### å­¦ä¹ èµ„æº
- [Three.js Journey](https://threejs-journey.com/) - ä»˜è´¹è¯¾ç¨‹ï¼Œéå¸¸å…¨é¢
- [Bruno Simonçš„YouTubeé¢‘é“](https://www.youtube.com/c/brunosimon)
- [Three.js Fundamentals](https://threejs.org/manual/#en/fundamentals)

#### ç¤¾åŒºèµ„æº
- [Three.js GitHubä»“åº“](https://github.com/mrdoob/three.js)
- [Three.jsè®ºå›](https://discourse.threejs.org/)
- [Stack Overflow - Three.jsæ ‡ç­¾](https://stackoverflow.com/questions/tagged/three.js)

### å®è·µé¡¹ç›®å»ºè®®

1. **åˆçº§é¡¹ç›®**
   - åˆ›å»ºä¸€ä¸ªæ—‹è½¬çš„åœ°çƒä»ª
   - åˆ¶ä½œä¸€ä¸ªç®€å•çš„3Dç›¸å†Œ
   - å®ç°ä¸€ä¸ªäº¤äº’å¼3Däº§å“å±•ç¤º

2. **ä¸­çº§é¡¹ç›®**
   - åˆ›å»ºä¸€ä¸ª3Dæ¸¸æˆåœºæ™¯
   - åˆ¶ä½œä¸€ä¸ªæ•°æ®å¯è§†åŒ–ä»ªè¡¨æ¿
   - å®ç°ä¸€ä¸ªè™šæ‹Ÿå±•å…

3. **é«˜çº§é¡¹ç›®**
   - åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„3Dæ¸¸æˆ
   - åˆ¶ä½œä¸€ä¸ªVR/ARåº”ç”¨
   - å®ç°ä¸€ä¸ª3Då»ºæ¨¡å·¥å…·

---

## æ€»ç»“

æœ¬æ•™ç¨‹æ¶µç›–äº†Three.jsçš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ï¼š

âœ… Three.jsçš„æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„
âœ… åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨çš„ä½¿ç”¨
âœ… åæ ‡ç³»å’Œç©ºé—´å˜æ¢
âœ… å‡ ä½•ä½“å’Œæè´¨çš„åº”ç”¨
âœ… åŠ¨ç”»åŸºç¡€å’Œæ§åˆ¶
âœ… å“åº”å¼è®¾è®¡
âœ… è°ƒè¯•å’Œä¼˜åŒ–æŠ€å·§

é€šè¿‡å­¦ä¹ æœ¬æ•™ç¨‹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š
- åˆ›å»ºåŸºæœ¬çš„3Dåœºæ™¯
- ä½¿ç”¨å„ç§å‡ ä½•ä½“å’Œæè´¨
- å®ç°ç®€å•çš„åŠ¨ç”»æ•ˆæœ
- å¤„ç†å“åº”å¼è®¾è®¡
- è°ƒè¯•å’Œä¼˜åŒ–ä½ çš„3Dåº”ç”¨

**ç»§ç»­åŠ æ²¹ï¼Three.jsçš„ä¸–ç•Œéå¸¸ç²¾å½©ï¼ŒæœŸå¾…ä½ åˆ›é€ å‡ºä»¤äººæƒŠå¹çš„3Dä½œå“ï¼** ğŸš€

---

## é™„å½•

### A. å¿«é€Ÿå‚è€ƒ

#### åŸºæœ¬åœºæ™¯è®¾ç½®
```javascript
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, aspect, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(width, height);
document.body.appendChild(renderer.domElement);
```

#### åˆ›å»ºç½‘æ ¼
```javascript
const mesh = new THREE.Mesh(geometry, material);
scene.add(mesh);
```

#### åŠ¨ç”»å¾ªç¯
```javascript
function animate() {
    requestAnimationFrame(animate);
    renderer.render(scene, camera);
}
animate();
```

#### å“åº”å¼å¤„ç†
```javascript
window.addEventListener('resize', () => {
    camera.aspect = width / height;
    camera.updateProjectionMatrix();
    renderer.setSize(width, height);
});
```

### B. å¸¸ç”¨å‡ ä½•ä½“å‚æ•°é€ŸæŸ¥

| å‡ ä½•ä½“ | æ„é€ å‡½æ•° | å‚æ•° |
|--------|----------|------|
| BoxGeometry | `BoxGeometry(w, h, d)` | å®½ã€é«˜ã€æ·± |
| SphereGeometry | `SphereGeometry(r, ws, hs)` | åŠå¾„ã€æ°´å¹³åˆ†æ®µã€å‚ç›´åˆ†æ®µ |
| ConeGeometry | `ConeGeometry(r, h, rs)` | åº•é¢åŠå¾„ã€é«˜åº¦ã€åˆ†æ®µæ•° |
| CylinderGeometry | `CylinderGeometry(rt, rb, h, rs)` | é¡¶éƒ¨åŠå¾„ã€åº•éƒ¨åŠå¾„ã€é«˜åº¦ã€åˆ†æ®µæ•° |
| TorusGeometry | `TorusGeometry(r, t, rs, ts)` | ä¸»åŠå¾„ã€ç®¡åŠå¾„ã€å¾„å‘åˆ†æ®µã€ç®¡åˆ†æ®µ |
| PlaneGeometry | `PlaneGeometry(w, h, ws, hs)` | å®½ã€é«˜ã€å®½åº¦åˆ†æ®µã€é«˜åº¦åˆ†æ®µ |

### C. å¸¸ç”¨æè´¨å±æ€§é€ŸæŸ¥

| æè´¨ç±»å‹ | ä¸»è¦å±æ€§ | æ˜¯å¦éœ€è¦å…‰ç…§ |
|----------|----------|--------------|
| MeshBasicMaterial | color, wireframe, opacity | å¦ |
| MeshStandardMaterial | color, roughness, metalness | æ˜¯ |
| MeshPhongMaterial | color, specular, shininess | æ˜¯ |
| MeshLambertMaterial | color | æ˜¯ |
| MeshNormalMaterial | - | å¦ |

### D. Three.jsç‰ˆæœ¬å…¼å®¹æ€§

æœ¬æ•™ç¨‹åŸºäºThree.js r160ç‰ˆæœ¬ç¼–å†™ã€‚ä¸åŒç‰ˆæœ¬ä¹‹é—´å¯èƒ½å­˜åœ¨APIå·®å¼‚ï¼Œå»ºè®®ï¼š

1. å§‹ç»ˆæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£
2. å…³æ³¨ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
3. ä½¿ç”¨ç¨³å®šç‰ˆæœ¬è¿›è¡Œç”Ÿäº§å¼€å‘
4. å®šæœŸæ›´æ–°ä»¥è·å¾—æ–°åŠŸèƒ½å’Œæ€§èƒ½æ”¹è¿›

---

**æ•™ç¨‹ç‰ˆæœ¬**: 1.0

**Three.jsç‰ˆæœ¬**: r160

---

**ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŸ¥é˜…å®˜æ–¹æ–‡æ¡£æˆ–å‚ä¸ç¤¾åŒºè®¨è®ºã€‚** ğŸ‰
